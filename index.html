<html>
  <head>
    <script src="kernel.js"></script>
    <style>
      #framebuffer {
        background-color: black;

        position: absolute;
        left: 0px;
        top: 0px;
        width: 100%;
        height: 100%;
      }
    </style>
  </head>
  <body>
    <canvas id="framebuffer"></canvas>
    <script>
      (async() => {
        document.title = "Loading...";
        const ctx = Kernel.display.getFramebuffer();

        ctx.fillStyle = "white";
        ctx.font = "48px monospace";
        
        ctx.fillText(
          "EclipseOS",
          window.innerWidth / 2 - 100,
          window.innerHeight / 2
        );

        console.log("Reading Operating System data...");

        const data = await fetch("init/index.js");
        const dataText = await data.text();

        const processData = Kernel.process.create(dataText);
        Kernel.process.spawn("init_stage0", processData);
      })();
    </script>
  </body>
</html>
